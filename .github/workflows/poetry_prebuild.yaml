name: poetry_build

on:
  workflow_call:
    inputs:
      pypi_package:
        required: true
        type: string

jobs:
  check-toml-version:
    uses: ./.github/workflows/check_toml.yaml
    with:
        pypi_package: ${{ inputs.pypi_package }}

  build:
    needs: check-toml-version
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
        
      - name: Install Poetry
        run: pip install poetry

      - name: Build pypi package package
        run: poetry build
